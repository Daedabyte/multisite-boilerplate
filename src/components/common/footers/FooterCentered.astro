---
/**
 * FooterCentered
 *
 * Centered, stacked footer with social links and quick links.
 * Elegant layout for brand-focused sites.
 *
 * @variant centered
 * @since 1.0.0
 *
 * Best for: Brand-focused sites, portfolios, creative agencies
 * Avoid when: Need extensive navigation structure
 *
 * @example
 * <FooterCentered
 *   logo={{ src: logoImg, alt: 'Company' }}
 *   description="Your tagline here"
 *   socialLinks={socials}
 *   links={quickLinks}
 * />
 */

import type { FooterCenteredProps } from './types';
import Container from '@components/ui/Container.astro';
import { Image } from 'astro:assets';
import { config, footerSocialLinks } from '@data/config';
import { getFooterLinks, navigation } from '@data/site/navigation';
import logoIcon from '@assets/images/logo_icon.png';

interface Props extends FooterCenteredProps {}

// Get flat list of footer links if not provided
const defaultLinks = getFooterLinks(navigation);

const {
  logo,
  description = config.siteDescription,
  copyright,
  socialLinks = footerSocialLinks ?? [],
  links = defaultLinks,
  container,
  class: className,
  classList,
  ...attrs
} = Astro.props;

const currentYear = new Date().getFullYear();
const copyrightText = copyright ?? `Â© ${currentYear} ${config.siteName}. All rights reserved.`;
---

<footer class={`footer footer--centered ${className ?? ''} ${classList ?? ''}`} role="contentinfo" {...attrs}>
  <Container {...container}>
    <div class="footer__inner">
      <a href={logo?.href ?? '/'} class="footer__logo-link" aria-label="Home">
        {logo?.src ? (
          <Image
            src={logo.src}
            alt={logo.alt}
            width={logo.width ?? 120}
            height={logo.height ?? 40}
            class="footer__logo"
            loading="lazy"
          />
        ) : (
          <Image
            src={logoIcon}
            alt="Site Logo"
            width={40}
            height={40}
            class="footer__logo"
            loading="lazy"
          />
        )}
      </a>

      {description && <p class="footer__description">{description}</p>}

      {socialLinks.length > 0 && (
        <div class="footer__social">
          {socialLinks.map((social) => (
            <a
              href={social.url}
              class="footer__social-link"
              aria-label={social.label ?? social.platform}
              target="_blank"
              rel="noopener noreferrer"
            >
              <i class={`fa-brands fa-${social.platform}`}></i>
            </a>
          ))}
        </div>
      )}

      {links.length > 0 && (
        <ul class="footer__links">
          {links.map((link) => (
            <li>
              <a
                href={link.href}
                class="footer__link"
                {...link.external ? { target: '_blank', rel: 'noopener noreferrer' } : {}}
              >
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      )}
    </div>

    <div class="footer__bottom">
      <p class="footer__copyright">{copyrightText}</p>
    </div>
  </Container>
</footer>

<style lang="scss" is:global>
  @use './footers.scss';
</style>
