---
import Container from '../ui/Container.astro';
import { config } from '../../data/config';
import { navigation, asNavLink } from '../../data/site/navigation';
import { Image } from 'astro:assets';
import logoIcon from '../../assets/images/logo_icon.png';

const currentYear = new Date().getFullYear();

const footerLinks = [
  {
    title: 'Company',
    links: [
      { href: '/about', label: 'About Us' },
      { href: '/contact', label: 'Contact' }
    ]
  },
  {
    title: 'Resources',
    links: [
      { href: '/faq', label: 'FAQ' }
    ]
  },
  {
    title: 'Legal',
    links: [
      { href: '/privacy', label: 'Privacy Policy' },
      { href: '/terms', label: 'Terms of Service' },
      { href: '/cookies', label: 'Cookie Policy' },
      { href: '/sitemap', label: 'Sitemap' }
    ]
  }
];
---

<footer class="footer" role="contentinfo">
  <Container>
    <div class="footer__top">
      <div class="footer__brand">
        <Image src={logoIcon} alt={config.siteName} width="120" height="40" class="footer__logo" loading={"eager"}/>
        <p class="footer__description">{config.siteDescription}</p>
        <div class="footer__contact">
          <a href={`tel:${config.company.phone}`} class="footer__link"><i class="fa-solid fa-phone"></i>{config.company.phoneFormatted}</a>
          <a href={`mailto:${config.company.email}`} class="footer__link"><i class="fa-solid fa-envelope"></i>{config.company.email}</a>
          <a href="" class="footer__link" target="_blank">
            <i class="fa-solid fa-map-pin"></i>{config.company.address}, {config.company.city}, {config.company.state} {config.company.zip}
          </a>
        </div>
      </div>
      
      <nav class="footer__nav" aria-label="Footer navigation">
        {footerLinks.map(section => (
          <div class="footer__section">
            <h3 class="footer__title">{section.title}</h3>
            <ul class="footer__list">
              {section.links.map(link => (
                <li>
                  <a href={link.href} class="footer__link">{link.label}</a>
                </li>
              ))}
            </ul>
          </div>
        ))}
      </nav>
    </div>
    
    <div class="footer__bottom">
      <div class="footer__bottom-content">
        <p class="footer__copyright">
          &copy; {currentYear} {config.siteName}. All rights reserved.
        </p>
        <div class="footer__social">
          <a href="#" class="footer__social-link" aria-label="Twitter">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
            </svg>
          </a>
          <a href="#" class="footer__social-link" aria-label="LinkedIn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"/>
              <circle cx="4" cy="4" r="2"/>
            </svg>
          </a>
        </div>
      </div>
      <div class="footer__message">
        Site made with <i class="fas fa-heart"></i> by <a href={asNavLink(navigation['daedabyte'])?.url} target="_blank" class="footer__link">{asNavLink(navigation['daedabyte'])?.label}</a>
      </div>
    </div>
  </Container>
</footer>

<style lang="scss">
  @use 'sass:map';
  @use '../../styles/abstracts' as *;

  .footer {
    background-color: var(--color-black);
    color: var(--color-neutral-300);
    
    &__top {
      display: grid;
      gap: var(--space-8);
      padding-block: var(--space-12);
      
      @include media-up('lg') {
        grid-template-columns: 1fr 2fr;
        gap: var(--space-12);
      }
    }
    
    &__brand {
      max-width: 20rem;
    }

    &__contact {
      display: flex;
      flex-direction: column;
      row-gap: var(--space-2);
      margin-top: var(--space-4);
    }
    
    &__logo {
      margin-bottom: var(--space-4);
    }
    
    &__description {
      color: var(--color-neutral-400);
    }
    
    &__nav {
      display: grid;
      gap: var(--space-8);
      
      @include media-up('md') {
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      }
    }
    
    &__title {
      margin-bottom: var(--space-3);
      color: var(--color-white);
      font-size: var(--font-size-lg);
      font-weight: var(--font-weight-bold);
    }
    
    &__list {
      @include reset-list;
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
    }
    
    &__link {
      color: var(--color-neutral-400);
      text-decoration: none;
      transition: var(--transition-fast);
      
      &:hover {
        color: var(--color-white);
      }
      
      &:focus-visible {
        @include focus-visible;
      }

      i {
        margin-right: 0.5rem;
      }
    }
    
    &__bottom {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-top: 1px solid var(--color-neutral-600);
    }

    &__bottom-content {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-4);
      padding-block: var(--space-6);
      width: 100%;
    }
    
    &__copyright {
      color: var(--color-neutral-500);
      margin: 0;
      font-size: var(--font-size-sm);
    }
    
    &__social {
      display: flex;
      gap: var(--space-3);
      
      &-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 2.5rem;
        height: 2.5rem;
        color: var(--color-neutral-400);
        border-radius: var(--border-radius-full);
        transition: var(--transition-fast);
        
        &:hover {
          color: var(--color-white);
          background-color: var(--color-neutral-800);
        }
        
        &:focus-visible {
          @include focus-visible;
        }
      }
    }

    &__message {
      text-align: center;
      padding-bottom: var(--space-6);
      color: var(--color-neutral-500);
      font-size: var(--font-size-sm);
      font-style: italic;

      i {
        color: var(--color-primary);
        margin: 0 0.25rem;
      }
    }
  }
</style>