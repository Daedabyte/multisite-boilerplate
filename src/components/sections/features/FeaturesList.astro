---
/**
 * FeaturesList
 *
 * Vertical list layout with optional dividers between items.
 * Clean, minimal design ideal for scannable content.
 *
 * @variant list
 * @since 1.0.0
 *
 * Best for: FAQ-style features, service listings, simple benefit lists
 * Avoid when: Need visual impact with images
 *
 * @example
 * <FeaturesList
 *   heading="What We Offer"
 *   features={[
 *     { title: 'Consulting', description: 'Expert guidance' }
 *   ]}
 *   dividers={true}
 * />
 */

import type { FeaturesBaseProps } from './types';
import Container from '@components/layout/Container.astro';

/**
 * List features variant props
 */
interface Props extends FeaturesBaseProps {
  /** Show dividers between items */
  dividers?: boolean;
}

const {
  heading,
  subheading,
  features,
  dividers = true,
  background,
  container,
  classList,
  id = 'features',
  ...attrs
} = Astro.props;
---

<section
  id={id}
  class:list={[
    'features',
    'features--list',
    dividers && 'features--dividers',
    background?.variant === 'alt' && 'features--alt',
    classList
  ]}
  {...attrs}
>
  <Container size="large" {...container}>
    {(heading || subheading) && (
      <div class="features__header">
        {heading && <h2 class="features__heading">{heading}</h2>}
        {subheading && <p class="features__subheading">{subheading}</p>}
      </div>
    )}

    <ul class="features__list" role="list">
      {features.map((feature) => (
        <li class="features__list-item">
          {feature.icon && (
            <div class="features__icon">
              <i class={feature.icon} aria-hidden="true"></i>
            </div>
          )}
          <div class="features__list-content">
            <h3 class="features__title">{feature.title}</h3>
            <p class="features__description">{feature.description}</p>
            {feature.link && (
              <a href={feature.link.href} class="features__link">
                {feature.link.label || 'Learn more'} â†’
              </a>
            )}
          </div>
        </li>
      ))}
    </ul>

    <slot />
  </Container>
</section>

<style lang="scss" is:global>
  @use './features.scss';
</style>

<style lang="scss">
  // Variant: List
  .features--list {
    .features__list {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .features__list-item {
      display: flex;
      gap: var(--space-4);
      padding-block: var(--space-6);

      &:first-child {
        padding-top: 0;
      }

      &:last-child {
        padding-bottom: 0;
      }
    }

    .features__icon {
      flex-shrink: 0;
      margin-bottom: 0;
    }

    .features__list-content {
      flex: 1;
    }

    &.features--dividers {
      .features__list-item {
        border-bottom: 1px solid var(--color-neutral-200);

        &:last-child {
          border-bottom: none;
        }
      }
    }
  }
</style>
