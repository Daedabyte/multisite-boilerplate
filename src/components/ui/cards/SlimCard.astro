---
/**
 * SlimCard
 *
 * Compact horizontal card with icon, title, optional description,
 * and optional suffix (badge, arrow, etc).
 *
 * @since 1.0.0
 *
 * Best for: Navigation lists, menu items, compact feature lists
 */

import type { CardBaseProps } from './types';

// ===================================
// SlimCard Types
// ===================================

/** Props for SlimCard component */
interface Props extends CardBaseProps {
  /** Card title */
  title: string;
  /** Short description */
  description?: string;
  /** Icon class */
  icon?: string;
  /** Right-side content (badge, arrow, etc.) */
  suffix?: string;
}

const {
  title,
  description,
  icon,
  suffix,
  hover = 'none',
  radius = 'medium',
  href,
  external,
  shadow = false,
  bordered = true,
  classList,
  id,
  ...attrs
} = Astro.props;

const Tag = href ? 'a' : 'div';
const linkProps = href ? {
  href,
  target: external ? '_blank' : undefined,
  rel: external ? 'noopener noreferrer' : undefined,
} : {};
---

<Tag
  id={id}
  class:list={[
    'slim-card',
    `slim-card--radius-${radius}`,
    `slim-card--hover-${hover}`,
    shadow && 'slim-card--shadow',
    bordered && 'slim-card--bordered',
    href && 'slim-card--clickable',
    classList
  ]}
  {...linkProps}
  {...attrs}
>
  {icon && (
    <span class="slim-card__icon" aria-hidden="true">
      <i class={icon}></i>
    </span>
  )}
  <div class="slim-card__content">
    <span class="slim-card__title">{title}</span>
    {description && <span class="slim-card__description">{description}</span>}
  </div>
  {suffix ? (
    <span class="slim-card__suffix">{suffix}</span>
  ) : href && (
    <span class="slim-card__arrow" aria-hidden="true">
      <i class="fa-solid fa-chevron-right"></i>
    </span>
  )}
</Tag>

<style lang="scss">
  @use './_card-base.scss' as *;

  .slim-card {
    @include card-base;
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);

    @include card-variants;
    @include card-hover-variants;

    // Icon
    &__icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 2.5rem;
      height: 2.5rem;
      background: var(--color-primary-100, rgba(var(--color-primary-rgb), 0.1));
      color: var(--color-primary);
      border-radius: var(--border-radius-base);
      font-size: 1rem;
      flex-shrink: 0;
    }

    // Content
    &__content {
      flex: 1;
      min-width: 0;
      display: flex;
      flex-direction: column;
      gap: var(--space-1);
    }

    &__title {
      font-size: var(--font-size-base);
      font-weight: var(--font-weight-medium);
      color: var(--color-neutral-900);
      line-height: 1.3;
    }

    &__description {
      font-size: var(--font-size-sm);
      color: var(--color-neutral-500);
      line-height: 1.4;
    }

    // Suffix / Arrow
    &__suffix {
      flex-shrink: 0;
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-medium);
      color: var(--color-neutral-500);
    }

    &__arrow {
      flex-shrink: 0;
      color: var(--color-neutral-400);
      font-size: var(--font-size-sm);
      transition: transform 0.2s ease, color 0.2s ease;
    }

    // Clickable state
    &--clickable:hover {
      .slim-card__title {
        color: var(--color-primary);
      }

      .slim-card__arrow {
        transform: translateX(2px);
        color: var(--color-primary);
      }
    }
  }
</style>
